!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b(a)}):a.CloudPoodll=b(a)}(this,function(a){return{version:"1.2.4",baseURL:"https://cloud.poodll.com/local/cpapi/fastpoodllloader.php",params:["parent","appid","timelimit","type","media","updatecontrol","width","height","id","iframeclass","transcode","transcoder","transcribe","subtitle","language","transcribevocab","expiredays","owner","region","token","localloader","localloading","notificationurl","speechevents","hints","alreadyparsed","fallback"],fetchContainers:function(a){var b=document.getElementsByClassName(a);return b},autoCreateRecorders:function(a){a||(a="cloudpoodll");for(var b=this.fetchContainers(a),c=0;c<b.length;c++)this.insertRecorder(b[c])},createRecorder:function(a){var b=document.getElementById(a);this.insertRecorder(b)},insertRecorder:function(a,b){void 0==b&&(b=this.parseAttributes(a));var c=this.createIframe(b);c&&(a.appendChild(c),a.setAttribute("data-alreadyparsed","true"))},parseAttributes:function(a){for(var b={},c=0;c<this.params.length;c++){var d=a.getAttribute("data-"+this.params[c]);null!==d&&(b[this.params[c]]=d)}return b},createIframe:function(a){if(a.hasOwnProperty("alreadyparsed")&&"true"==a.alreadyparsed)return console.log("Can only parse a cloudpoodll element once. Cancelling."),!1;a.hasOwnProperty("parent")||(a.parent=window.location.protocol+"//"+window.location.hostname),a.hasOwnProperty("media")||(a.media="audio");var b=document.createElement("iframe");if(a.hasOwnProperty("localloader"))var c=a.hasOwnProperty("localloading")?a.localloading:"auto";else var c="never";switch(c){case"always":var d=a.parent+a.localloader+"?";break;case"never":var d=this.baseURL+"?";break;case"auto":default:var e=this.is_ios()||this.is_safari();if(e)var d=a.parent+a.localloader+"?";else var d=this.baseURL+"?"}for(var f in a)d=d+f+"="+a[f]+"&";return b.setAttribute("src",d),a.hasOwnProperty("iframeclass")?b.setAttribute("class",a.iframeclass):(a.hasOwnProperty("width")||(a.width=350),b.setAttribute("width",a.width),a.hasOwnProperty("height")||("audio"==a.media?a.height=250:a.height=550),b.setAttribute("height",a.height)),b.setAttribute("frameBorder",0),b.setAttribute("allow","camera,microphone"),b},theCallback:function(a){switch(a.type){case"filesubmitted":var b=a.updatecontrol,c=document.getElementById(b),d=a.mediaurl;c&&(c.value=d);break;case"error":alert("ERROR:".data.message)}},initEvents:function(){var a=this;window.addEventListener("message",function(b){var c=b.data;c&&c.hasOwnProperty("id")&&c.hasOwnProperty("type")&&a.theCallback(c)})},fetchroot:function(){return a},is_safari:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},is_ios:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}}});