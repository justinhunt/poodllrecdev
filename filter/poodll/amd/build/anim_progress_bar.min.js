define(["jquery","core/log"],function(a,b){"use strict";return b.debug("Bar Progress: initialising"),{playcanvas:null,context:null,startx:null,starty:null,barwidth:null,barheight:null,enabled:!1,clone:function(){return a.extend(!0,{},this)},init:function(a,b){this.playcanvas=a.get(0),this.startx=0,this.starty=0,this.barwidth=this.playcanvas.width,this.barheight=this.playcanvas.height,this.context=this.playcanvas.getContext("2d"),this.barcolor=b?b:"#C2C2C2"},clear:function(){this.context.clearRect(this.startx,this.starty,this.barwidth,this.barheight)},fetchCurrent:function(){return 0},stop:function(){this.enabled=!1,this.clear()},stopthere:function(){this.enabled=!1},start:function(){this.clear(),this.enabled=!0;var a=this;this.context.textAlign="center",this.context.font="12px Arial";var b=function(){if(a.enabled){a.clear(),a.context.fillStyle=a.barcolor,a.context.fillRect(a.startx,a.starty,a.fetchCurrent()*a.barwidth,a.barheight);var c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;c(b)}};b()}}});