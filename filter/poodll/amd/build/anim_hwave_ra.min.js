define(["jquery","core/log"],function(a,b){"use strict";return b.debug("anim_horizontal_wave_ra: initialising"),{analyser:null,cvs:null,cvsctx:null,sounddetected:!1,clone:function(){return a.extend(!0,{},this)},init:function(a,b){this.cvs=b,this.cvsctx=b.getContext("2d"),this.cvsctx.font="48px FontAwesome",this.cvsctx.textAlign="center",this.analyser=a},clear:function(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height),this.cvsctx.lineWidth=2,this.cvsctx.strokeStyle="rgb(0, 0, 0)",this.cvsctx.beginPath(),this.cvsctx.fillText("ï„°",this.cvs.width/2,this.cvs.height/1.5),this.cvsctx.stroke()},start:function(){this.analyser.core.fftSize=2048;var a=this.analyser.core.fftSize,b=new Uint8Array(a),c=this.cvs.width,d=this.cvs.height,e=this.cvsctx,f=this.analyser,g=this;this.clear();var h=function(){requestAnimationFrame(h);if(f.theinterval){f.core.getByteTimeDomainData(b),e.clearRect(0,0,c,d),e.lineWidth=2,e.strokeStyle="rgb(0, 0, 0)",e.beginPath();var i=1*c/a,j=0;if(a>0){var k=b[a-1];128!=k&&(g.sounddetected=!0)}for(var l=0;l<a;l++){var m=b[l]/128,n=m*d/2;0===l?e.moveTo(j,n):e.lineTo(j,n),j+=i}e.lineTo(c,d/2),e.fillText("ï„°",c/2,d/1.5),e.stroke()}};h()}}});